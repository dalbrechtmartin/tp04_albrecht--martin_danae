<form [formGroup]="carteForm" (ngSubmit)="onSubmit()">
    <div
        class="flex flex-col justify-around bg-black p-4 border border-white border-opacity-30 rounded-lg shadow-xl max-w-xs mx-auto">
        <div class="flex flex-row items-center justify-between">
            <input placeholder="Nom sur la carte" id="nom" formControlName="nom" type="text"
                class="input flex-grow" />
            <div class="flex items-center justify-center relative w-14 h-9 bg-black">
                <svg xml:space="preserve" viewBox="0 0 50 50" height="40px" width="40px" y="0px" x="0px"
                    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Layer_1"
                    class="chip" version="1.1">
                    <image href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
              AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB6VBMVEUAAACNcTiVeUKVeUOY
              fEaafEeUeUSYfEWZfEaykleyklaXe0SWekSZZjOYfEWYe0WXfUWXe0WcgEicfkiXe0SVekSXekSW
              ekKYe0a9nF67m12ZfUWUeEaXfESVekOdgEmVeUWWekSniU+VeUKVeUOrjFKYfEWliE6WeESZe0GS
              e0WYfES7ml2Xe0WXeESUeEOWfEWcf0eWfESXe0SXfEWYekSVeUKXfEWxklawkVaZfEWWekOUekOW
              ekSYfESZe0eXekWYfEWZe0WZe0eVeUSWeETAnmDCoWLJpmbxy4P1zoXwyoLIpWbjvXjivnjgu3bf
              u3beunWvkFWxkle/nmDivXiWekTnwXvkwHrCoWOuj1SXe0TEo2TDo2PlwHratnKZfEbQrWvPrWua
              fUfbt3PJp2agg0v0zYX0zYSfgkvKp2frxX7mwHrlv3rsxn/yzIPgvHfduXWXe0XuyIDzzISsjVO1
              lVm0lFitjVPzzIPqxX7duna0lVncuHTLqGjvyIHeuXXxyYGZfUayk1iyk1e2lln1zYTEomO2llrb
              tnOafkjFpGSbfkfZtXLhvHfkv3nqxH3mwXujhU3KqWizlFilh06khk2fgkqsjlPHpWXJp2erjVOh
              g0yWe0SliE+XekShhEvAn2D///+gx8TWAAAARnRSTlMACVCTtsRl7Pv7+vxkBab7pZv5+ZlL/UnU
              /f3SJCVe+Fx39naA9/75XSMh0/3SSkia+pil/KRj7Pr662JPkrbP7OLQ0JFOijI1MwAAAAFiS0dE
              orDd34wAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IDx2lsiuJAAACLElEQVRIx2Ng
              GAXkAUYmZhZWPICFmYkRVQcbOwenmzse4MbFzc6DpIGXj8PD04sA8PbhF+CFaxEU8iWkAQT8hEVg
              OkTF/InR4eUVICYO1SIhCRMLDAoKDvFDVhUaEhwUFAjjSUlDdMiEhcOEItzdI6OiYxA6YqODIt3d
              I2DcuDBZsBY5eVTr4xMSYcyk5BRUOXkFsBZFJTQnp6alQxgZmVloUkrKYC0qqmji2WE5EEZuWB6a
              lKoKdi35YQUQRkFYPpFaCouKIYzi6EDitJSUlsGY5RWVRGjJLyxNy4ZxqtIqqvOxaVELQwZFZdkI
              JVU1RSiSalAt6rUwUBdWG1CP6pT6gNqwOrgCdQyHNYR5YQFhDXj8MiK1IAeyN6aORiyBjByVTc0F
              qBoKWpqwRCVSgilOaY2OaUPw29qjOzqLvTAchpos47u6EZyYnngUSRwpuTe6D+6qaFQdOPNLRzOM
              1dzhRZyW+CZouHk3dWLXglFcFIflQhj9YWjJGlZcaKAVSvjyPrRQ0oQVKDAQHlYFYUwIm4gqExGm
              BSkutaVQJeomwViTJqPK6OhCy2Q9sQBk8cY0DxjTJw0lAQWK6cOKfgNhpKK7ZMpUeF3jPa28BCET
              amiEqJKM+X1gxvWXpoUjVIVPnwErw71nmpgiqiQGBjNzbgs3j1nus+fMndc+Cwm0T52/oNR9lsdC
              S24ra7Tq1cbWjpXV3sHRCb1idXZ0sGdltXNxRateRwHRAACYHutzk/2I5QAAACV0RVh0ZGF0ZTpj
              cmVhdGUAMjAyMy0wMi0xM1QwODoxNToyOSswMDowMEUnN7UAAAAldEVYdGRhdGU6bW9kaWZ5ADIw
              MjMtMDItMTNUMDg6MTU6MjkrMDA6MDA0eo8JAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAy
              LTEzVDA4OjE1OjI5KzAwOjAwY2+u1gAAAABJRU5ErkJggg==" y="0" x="0" height="50" width="50" id="image0"></image>
                </svg>
            </div>
        </div>
        <!-- .dirty = si modifié / .touched = si "tenté de modifié" -->
        <div *ngIf="carteForm.get('nom')?.invalid && (carteForm.get('nom')?.dirty || carteForm.get('nom')?.touched)"
            class="error">
            <small *ngIf="carteForm.get('nom')?.errors?.['required']">Un nom est requis.</small>
        </div>
        <div class="flex flex-col space-y-3">
            <input placeholder="0000 0000 0000 0000" id="code" formControlName="code" type="text" class="input mt-3"
                formatageCode />
            <div *ngIf="carteForm.get('code')?.invalid && (carteForm.get('code')?.dirty || carteForm.get('code')?.touched)"
                class="error">
                <small *ngIf="carteForm.get('code')?.errors?.['required']">Un code est requis.</small>
                <small *ngIf="carteForm.get('code')?.errors?.['pattern']">Le code est doit commencer par 4 ou 5.</small>
                <small *ngIf="carteForm.get('code')?.errors?.['minlength']">Le code doit être de 16 chiffres.</small>
            </div>
            <div class="flex flex-row justify-between">
                <div class="flex items-center space-x-2">
                    <input placeholder="MM" id="mois" formControlName="mois" type="text" class="input w-12"
                        formatageDate />
                    <span>/</span>
                    <input placeholder="AA" id="annee" formControlName="annee" type="text" class="input w-12"
                        formatageDate />
                </div>
                <input placeholder="CVV" id="ccv" formControlName="ccv" type="text" class="input" formatageCCV />
            </div>
            <div class="flex flex-col">
                <div *ngIf="carteForm.get('mois')?.invalid && (carteForm.get('mois')?.dirty || carteForm.get('mois')?.touched)"
                    class="error">
                    <small *ngIf="carteForm.get('mois')?.errors?.['required']">Le mois est requis.</small>
                    <small *ngIf="carteForm.get('mois')?.errors?.['minlength']">Le mois doit être entre 1 et 12.</small>
                    <small *ngIf="carteForm.get('mois')?.errors?.['pattern']">Le mois doit être un nombre
                        valide.</small>
                </div>
                <div *ngIf="carteForm.get('annee')?.invalid && (carteForm.get('annee')?.dirty || carteForm.get('annee')?.touched)"
                    class="error">
                    <small *ngIf="carteForm.get('annee')?.errors?.['required']">L'année est requise.</small>
                    <small *ngIf="carteForm.get('annee')?.errors?.['minlength']">L'année doit être de 2 chiffres.</small>
                    <small *ngIf="carteForm.get('annee')?.errors?.['pattern']">L'année doit être valide.</small>
                    <small *ngIf="carteForm.get('annee')?.errors?.['min']">L'année doit être supérieure à l'année précédente.</small>
                </div>
                <div *ngIf="carteForm.get('ccv')?.invalid && (carteForm.get('ccv')?.dirty || carteForm.get('ccv')?.touched)"
                    class="error">
                    <small *ngIf="carteForm.get('ccv')?.errors?.['required']">Le CCV est requis.</small>
                    <small *ngIf="carteForm.get('ccv')?.errors?.['minlength']">Le CCV doit être de 3 chiffres.</small>
                    <small *ngIf="carteForm.get('ccv')?.errors?.['pattern']">Le CCV est invalide.</small>
                </div>
            </div>
        </div>
    </div>

    <button type="submit" class="button">Enregistrer
        <svg class="svgIcon" viewBox="0 0 576 512">
            <path
                d="M512 80c8.8 0 16 7.2 16 16v32H48V96c0-8.8 7.2-16 16-16H512zm16 144V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V224H528zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm56 304c-13.3 0-24 10.7-24 24s10.7 24 24 24h48c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zm128 0c-13.3 0-24 10.7-24 24s10.7 24 24 24H360c13.3 0 24-10.7 24-24s-10.7-24-24-24H248z">
            </path>
        </svg>
    </button>
</form>